<div class="ui divided list">

    <div
            ng-repeat="device in devices"
            ng-controller="deviceCtrl"
            class="device-type-{{device.type}} item">
        <form name="deviceForm"
              class="five column doubling ui form grid"
              ng-submit="save()">
            <div class="column field">
                <input
                        name="name"
                        type="text"
                        ng-model="device.name"
                        class="device-name"
                        ng-blur="save()"
                        placeholder="Name"
                        required/>
            </div>
            <div class="column field">
                <input
                        name="ip"
                        type="text"
                        ng-model="device.ip"
                        class="device-ip"
                        ng-blur="save()"
                        ng-pattern='/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/'
                        placeholder='xxx.xxx.xxx.xxx'
                        required/>
            </div>
            <div class="column field">
                <ng-select-box
                        ng-model="device.type"
                        ng-name="type"
                        ng-choose="save()"
                        ng-collection="deviceTypes"
                        ng-collection-key="key"
                        ng-collection-text="name"
                        ng-collection-default-text="Device type"
                        />
            </div>
            <div class="column field">
                <ng-select-box
                        ng-model="device.vpn"
                        ng-name="vpn"
                        ng-choose="save()"
                        ng-collection="vpns"
                        ng-collection-key="self"
                        ng-collection-text="name"
                        ng-collection-default-text="VPN"
                        ng-null-name="-- No VPN --"
                        />
            </div>

            <div class="column narrow right aligned segment">
                <button
                    class="delete-button teal ui button floated right"
                    ng-if="device.id"
                    ng-click="delete($event)"
                    >
                    Delete
                </button>
            </div>
        </form>
    </div>

    <div class="ui item grid one">
        <div class="column right aligned segment">
            <button class="add-device ui black button" ng-click="add_device()">
                <i class="icon add"></i> Add device
            </button>
        </div>
    </div>

</div>
